<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_65) on Thu Jan 23 15:53:40 PST 2020 -->
<TITLE>
JDBCAccessLogFilter (JDBC Access Log Filter and Valve files)
</TITLE>

<META NAME="date" CONTENT="2020-01-23">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="JDBCAccessLogFilter (JDBC Access Log Filter and Valve files)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../info/bobkirby/valve/package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../info/bobkirby/valve/FacadeJDBCAccessLogFilter.FacadeFilterResponse.html" title="class in info.bobkirby.valve"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.DoArrayString.html" title="class in info.bobkirby.valve"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?info/bobkirby/valve/JDBCAccessLogFilter.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="JDBCAccessLogFilter.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;<A HREF="#nested_class_summary">NESTED</A>&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
info.bobkirby.valve</FONT>
<BR>
Class JDBCAccessLogFilter</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../resources/inherit.gif" ALT="extended by "><B>info.bobkirby.valve.JDBCAccessLogFilter</B>
</PRE>
<DL>
<DT><B>All Implemented Interfaces:</B> <DD>javax.servlet.Filter</DD>
</DL>
<DL>
<DT><B>Direct Known Subclasses:</B> <DD><A HREF="../../../info/bobkirby/valve/EE7JDBCAccessLogFilter.html" title="class in info.bobkirby.valve">EE7JDBCAccessLogFilter</A>, <A HREF="../../../info/bobkirby/valve/FacadeJDBCAccessLogFilter.html" title="class in info.bobkirby.valve">FacadeJDBCAccessLogFilter</A></DD>
</DL>
<HR>
<DL>
<DT><PRE>public class <B>JDBCAccessLogFilter</B><DT>extends java.lang.Object<DT>implements javax.servlet.Filter</DL>
</PRE>

<P>
This highly configurable Filter produces database rows for each HTTP access.
 A <code>javax.servlet.Filter</code> deployment
 is typically configured in <code>WEB-INF/web.xml</code>,
 with XML tags and values within a high-level &lt;filter&gt; tag pair.
 Within this pair, top-level configuration includes tag pairs:<ul>
<li>Full filter class name &lt;filter-class&gt;
for this <code>javax.servlet.Filter</code> implementation class.</li>
<li>Filter name &lt;filter-name&gt; of the filter, such as the container name,
which defaults to class simple name of this filter implementation.</li>
<li>Optional description &lt;description&gt; for the entire filter</li>
<li>Multiple initialization parameter &lt;init-param&gt; tag pairs,
which may each contain tag pairs:<ul>
<li>The name of an initialization parameter &lt;param-name&gt;</li>
<li>The value of the named initialization parameter &lt;param-value&gt;</li>
<li>An optional description of the initialization parameter
&lt;description&gt;</li>
</ul>
The contents of the name-value pairs are passed in a
<code>javax.servlet.FilterConfig</code> implementation
<code>java.util.Enumeration</code> described below.</li>
</ul>
<p>
<code>WEB-INF/web.xml</code> configuration should also contain high-level
<code>filter-mapping</code> tags, which includes tags:<ul>
<li><code>filter-name</code>,
whose value should match the <code>filter-name</code>
value within the <code>filter</code> tags.</li>
<li><code>url-pattern</code>,
which specifies URLs to which the filter should be applied,
such as <code>/*</code> to match everything.</li>
</ul>
<h2>Initialization parameter processing</h2>
 The <code>FilterConfig</code> implementation,
 which processes &lt;init-param&gt; name-value pairs
 only accepts one instance of each initialization parameter
 &lt;init-param&gt; name within its namespace.
 This Filter implementation skips
 hyphen (-), underscore (_), double quote (&quot;), and decimal digit (0-9)
 characters when recognizing initialization configuration names,
 which are identified in lower case,
 but underscores and digits are recognized to distinguish column names,
 which may be derived from a parameterized configuration name.
 Unacceptable initialization parameter names produce error log entries.
 Omitted or empty initialization parameter values are mostly ignored.
<h2>Initialization parameter configuration</h2>
 There are several categories of configuration:<ul>
<li>JDBC compatible database connection parameters</li>
<li>Column detail parameters</li>
<li>Names of arguments to HTTP access functions</li>
<li>Assignment of database column names</li>
</ul>
<h3>Connection parameters</h3>
 If both DataSource &lt;datasource&gt;
 and JDBC connection values are specified
 and JNDI returns a DataSource that provides a connection,
 then the JDBC connection parameters are ignored.
 The DataSource JNDI binding name might follow
 the older convention like "jdbc/PostgresDS" or
 use a shorter name like "PostgresDS" in configuration files such as
 "server.xml", "context.xml", or "standalone.xml" establish the name.
 The long form JNDI lookup name could be "java:comp/env/jdbc/PostgresDS".
 For the older binding convention,
 an <code>InitialContext.lookup(String)</code> may find
 shorter names like "jdbc/PostgresDS"
 or the global name "java:/jdbc/PostgresDS".
 <p>
 The container may provide the properties needed to establish
 an InitialContext, but if not, then a "jndi.properties" file
 may need to be available as a root file on the classpath,
 possibly in the same JAR or exploded directory
 as the class file of this Filter.
 <p>
 Later versions of Tomcat have a &lt;GlobalNamingResources&gt; tag
 of the &lt;Server&gt; tag in the "services.xml" file,
 which may specify a DataSource.
 <p>
 The JDBC connection parameter names are:<ul>
<li>JDBC connection URL &lt;connectionurl&gt;,
like <code>jdbc:postgresql://localhost:5432/dbname</code>,
which specifies the <code>jdbc</code> URL schema;
a PostgreSQL JDBC implementation;
a host name, <code>localhost</code>, which could be either a DNS or IP address;
an optional port number 5432, which is the default PostgreSQL port; and
<code>dbname</code>, which names a database on the PostgreSQL server.
<p>
For some databases, the connection URL may be quite long,
wrapping around its single line.
Although some databases may accept a user name and password
in the connection URL, other will only accept the user name and password
when provided as separate configuration items.
</li>
<li>Fully qualified JDBC driver class name string &lt;driver-class&gt;,
like <code>org.postgresql.Driver</code></li>
<li>Database user name string &lt;user-name&gt;, like <code>user</code></li>
<li>Database password string &lt;password&gt;, like <code>password</code></li>
</ul>
<h3>Standard HTTP access</h3>
Most of the documented access methods for
HTTP requests, responses, sessions, and server contexts
have actions to obtain a container value and
write a transformed value via JDBC to a relational database column.
Each access method has its "get" or "is" prefix stripped,
along with occasionally extraneous parts of the name,
and the remaining camel case string is converted to lower case,
which creates typical names for database columns.
Some names are suffixed with type names that show how values will be processed.
<ul>
<li><b>Boolean</b>: A mostly two (2) state value, true or false,
with the rare possiblity of a third state, unknown,
which could occur with named attribute access.</li>
<li><b>Short</b>: A 16-bit signed integer.</li>
<li><b>Integer</b>: A 32-bit signed integer.</li>
<li><b>Long</b>: A 64-bit signed integer.</li>
<li><b>Timestamp</b>: a 64-bit Java Timestamp with milliseconds,
which may not match the precision of the host machine
and which some databases round, perhaps to as coarse as a second.</li>
<li><b>String</b>: Characters without a terminator,
which some database fields, like CHAR without VAR, pad with blanks on the right.
A size assignment can truncate at the end for a positive size
and at the begin for a negative size 
when the absolute size is less than the number of characters.</li>
<li><b>Text</b>: Character handling like String except that
if a size assignment truncates characters,
an ellipsis string is added the end or beginning of the truncated characters
for positive or negative size, respectively.
Database field length declarations should consider ellipsis characters.</li>
<li><b>Clob</b>: an extension of String and Text that transports characters
as a CLOB, character large object,
which some data implementations required for even moderate lengths.</li>
<li><b>Array</b>: An indexed group of values of the same type.
Currently, the toString() converts values the strings
and wraps those strings in array literal syntax.
The protected method
<code>FilterResponse.stringArrayElement(String, StringBuffer)</code>,
which implements quoting for early PostgreSQL String array elements,
may be overridden for the quoting conventions of the few databases
that support arrays.
Where arrays are not sufficiently supported either CLOB or JSON fields
may partially stand in for arrays.
<p>
The PostgreSQL default of curly braces ({}) for outer array delimiters
may be changed in filter configuration to another character pair,
such as square brackets ([]), which might go to a JSON field,
which some relational databases support instead of native arrays.
Some databases may automatically convert the entire literal string
into a native value of a field declaration.</li>
<li><b>Key</b>: Suitable values for part of a unique key,
such as a primary key of a database table.
If a write fails with unique value collision,
the key may be advanced to retry the write for a configurable number of retries.
The SQL state string for a unique value collision, 23505,
may be replace with filter configuration.
Key fields may avoid using synthetic values,
such as a serialized number field,
for primary keys, particularly when derived from machine clocks,
which may be less accurate than their precision.</li>
</ul>
Accessed values that are unavailable are not sent as null
except for array and Collection members.
Instead, JDBC sends no value for the column,
which the relational database should fill with its default value.
<p>
Additionally, some accessed values have numerical defaults, like 0 or -1,
when an object such as a response buffer or <code>HttpSession</code>
are unavailable.
Such default accessed values are converted into applying database defaults,
typically <code>null</code>, to database fields.
If the original access value defaults were wanted,
the database field defaults could establish them.
Request parameter values,
which silently return <code>null</code> when a parsing error occurs
and return -1 unchanged even thought it may represent an unknown value,
are an exception.
<p>
The last types of a name indicate what is sent to the relational database.
Implemented access names are all lower case alphas (a-z),
which, if unquoted, the relational database may convert to its preferred case.
Two names, "method" and "timestamp", are surrounded with double quotes
to avoid interpretation as SQL keywords.
<p>
Implemented names of no-parameter or fixed-parameter access methods follow.
<table border="1" cellpadding="3" cellspacing="0">
<tr><th>Column parameter</th><th>HTTP accessor</th><th>SQL process</th></tr>
<tr><td>attributenames</td><td>request.getAttributeNames()</td>
 <td>ArrayString</td></tr>
<tr><td>authtype</td><td>request.getAuthType()</td><td>String</td></tr>
<tr><td>buffersize</td><td>response.getBufferSize()</td><td>Integer</td></tr>
<tr><td>characterencoding</td><td>request.getCharacterEncoding()</td>
 <td>String</td></tr>
<tr><td>contentcountlength<br>contentcountlengthinteger</td>
 <td>response.getContentCount() ||&nbsp;response.getContentLength()</td>
 <td>Long<br>Integer</td></tr>
<tr><td>contentlength</td><td>request.getContentLength()</td>
 <td>Integer</td></tr>
<tr><td>contenttype</td><td>request.getContentType()</td><td>String</td></tr>
<tr><td>contextpath</td><td>request.getContextPath()</td><td>String</td></tr>
<tr><td>elapsedmilli</td><td>System.currentTimeMillis()
 - response.getCurrentTimeMillis()</td><td>Long</td></tr>
<tr><td>epochmilli<br>epochmillikey</td>
 <td>response.getCurrentTimeMillis()</td><td>Long<br>LongKey</td></tr>
<tr><td>headerfirsts<br>headerfirstsclob</td>
 <td>e=request.getHeaderNames()<br>request.getHeader(e.nextElement())</td>
 <td>ArrayString<br>ArrayStringClob</td></tr>
<tr><td>headernames<br>headernamesclob</td><td>request.getHeaderNames()</td>
 <td>ArrayString<br>ArrayStringClob</td></tr>
<tr><td>idvalid</td><td>request.isRequestedSessionIdValid()</td>
 <td>Boolean</td></tr>
<tr><td>idfromcookie</td><td>request.isRequestedSessionIdFromCookie()</td>
 <td>Boolean</td></tr>
<tr><td>idfromurl</td><td>request.isRequestedSessionIdFromURL()</td>
 <td>Boolean</td></tr>
<tr><td>initparameternames</td><td>servletContext.getInitParameterNames()</td>
 <td>ArrayString</td></tr>
<tr><td>locale</td><td>response.getLocale().toString()</td>
 <td>String</td></tr>
<tr><td>localedisplayname</td> <!-- 200B is zero width space Unicode -->
 <td>response.getLocale().getDisplayName()</td>
 <td>String</td></tr>
<tr><td>localaddr</td><td>request.getLocalAddr()</td><td>String</td></tr>
<tr><td>localname</td><td>request.getLocalName()</td><td>String</td></tr>
<tr><td>localport</td><td>request.getLocalPort()</td><td>Integer</td></tr>
<tr><td>maxinactiveinterval</td><td>session.getMaxInactiveInterval()</td>
 <td>Integer</td></tr>
<tr><td>"method"</td><td>request.getMethod()</td><td>String</td></tr>
<tr><td>parameternames</td><td>request.getParameterNames()</td>
 <td>ArrayString</td></tr>
<tr><td>pathinfo</td><td>request.getPathInfo()</td><td>String</td></tr>
<tr><td>pathtranslated</td><td>request.getPathTranslated()</td>
 <td>String</td></tr>
<tr><td>principal</td><td>principal.toString()</td><td>String</td></tr>
<tr><td>protocol</td><td>request.getProtocol()</td><td>String</td></tr>
<tr><td>querystring<br>querystringclob<br>querytext<br>querytextclob</td>
 <td>request.getQueryString()</td>
 <td>String<br>StringClob<br>Text<br>TextClob</td></tr>
<tr><td>referer<br>refererclob<br>referertext<br>referertextclob</td>
 <td>request.getHeader("referer")</td>
 <td>String<br>StringClob<br>Text<br>TextClob</td></tr>
<tr><td>remoteaddr</td><td>request.getRemoteAddr()</td><td>String</td></tr>
<tr><td>remotehost<br>remotehosttext</td><td>request.getRemoteHost()</td>
 <td>String<br>Text</td></tr>
<tr><td>remoteport</td><td>request.getRemotePort()</td><td>Integer</td></tr>
<tr><td>remoteuser</td><td>request.getRemoteUser()</td><td>String</td></tr>
<tr><td>requestedsessionid</td><td>request.getRequestedSessionId()</td>
 <td>String</td></tr>
<tr><td>requesturi</td><td>request.getRequestURI()</td><td>String</td></tr>
<tr><td>requesturl</td><td>request.getRequestURL()</td><td>String</td></tr>
<tr><td>responsecharacterencoding</td><td>response.getCharacterEncoding()</td>
 <td>String</td></tr>
<tr><td>responsecontentcount<br>responsecontentcountinteger</td>
 <td>response.getIntegerContentLength()</td><td>Long<br>Integer</td></tr>
<tr><td>responsecontentlength<br>responsecontentlengthinteger</td>
 <td>response.getContentLength()<br>response.getContentLengthInteger()</td>
 <td>Long<br>Integer</td></tr>
<tr><td>responsecontenttype</td><td>response.getContentType()</td>
 <td>String</td></tr>
<tr><td>responseheaderfirsts<br>responseheaderfirstsclob</td>
 <td>i=response.getHeaderNames().iterator()<br>response.getHeader(i.next())</td>
 <td>ArrayString<br>ArrayStringClob</td></tr>
<tr><td>responseheadernames<br>responseheadernamesclob</td>
 <td>response.getHeaderNames()</td>
 <td>ArrayString<br>ArrayStringClob</td></tr>
<tr><td>rootcause<br>rootcausetext<br>rootcausetrace<br>rootcausetraceclob</td>
<td>catch(Throwable)<br>request.setAttribute(String,&nbsp;Throwable)<br>
for(Throwable.getCause())</td>
 <td>String<br>Text<br>ArrayString<br>ArrayStringClob</td></tr>
<tr><td>scheme</td><td>request.getScheme()</td><td>String</td></tr>
<tr><td>secure</td><td>request.isSecure()</td><td>Boolean</td></tr>
<tr><td>serverinfo<br>serverinfotext</td><td>servletContext.getServerInfo()</td>
 <td>String<br>Text</td></tr>
<tr><td>servername</td><td>request.getServerName()</td><td>String</td></tr>
<tr><td>serverport</td><td>request.getServerPort()</td><td>Integer</td></tr>
<tr><td>servletattributenames</td><td>servletContext.getAttributeNames()</td>
 <td>ArrayString</td></tr>
<tr><td>servletcontextname</td>
 <td>servletContext.getServletContextName()</td><td>String</td></tr>
<tr><td>servletcontextpath<br>servletcontextpathtext</td>
 <td>servletContext.getContextPath()</td>
 <td>String<br>Text</td></tr>
<tr><td>servletmajorversion</td><td>servletContext.getMajorVersion()</td>
 <td>Short</td></tr>
<tr><td>servletminorversion</td><td>servletContext.getMinorVersion()</td>
 <td>Short</td></tr>
<tr><td>servletpath</td><td>request.getServletPath()</td><td>String</td></tr>
<tr><td>sessionattributenames</td><td>session.getAttributeNames()</td>
 <td>ArrayString</td></tr>
<tr><td>sessioncreationtime</td><td>session.getCreationTime()</td>
 <td>Timestamp</td></tr>
<tr><td>sessionid</td><td>session.getId()</td><td>String</td></tr>
<tr><td>sessionisnew</td><td>session.isNew()</td><td>Boolean</td></tr>
<tr><td>status</td><td>response.getStatusInteger()</td><td>Integer</td></tr>
<tr><td>throwable<br>throwabletext<br>throwabletrace<br>throwabletraceclob</td>
<td>catch(Throwable)<br>request.setAttribute(String,&nbsp;Throwable)</td>
 <td>String<br>Text<br>ArrayString<br>ArrayStringClob</td></tr>
<tr><td>"timestamp"<br>timestampkey</td>
 <td>response.getCurrentTimeMillis()</td>
 <td>Timestamp<br>TimestampKey</td></tr>
<tr><td>useragent<br>useragentclob<br>useragenttextclob<br>useragenttext</td>
 <td>request.getHeader("user-agent")</td>
 <td>String<br>StringClob<br>Text<br>TextClob</td></tr>
</table>
The early developers of the <code>ServletResponse</code> interface had
a lack of foresight in not providing final sent content size and status,
which are important operational details that should be logged as needed.
Tomcat valves get around the issue by being provided with
implementation class objects but <code>Filter</code> implementations
may get a <code>ServletResponse</code> facade,
which reflection might be able to unmask.
An <code>HttpServletResponseWrapper</code>
implements <code>getStatusInteger</code>
through reflection on the implementations of the <code>ServletResponse</code>,
which typically include <code>getStatus</code>.
The wrapper also tries to heuristically implement <code>Content</code>
<code>Count</code> and <code>Length</code> octet methods with reflection,
which access priviledges may not always allow.
<p>
The <code>ArrayStep</code> provides reflection support for access
to createArray methods of <code>java.sql.Connection</code>
to create <code>java.sql.Array</code> instances,
which are needed to populate array database columns (fields).
With earlier JDBC versions where createArray methods are unavailable,
<code>SqlStringArray</code> supports earlier PostgreSQL versions.
<h3>Parameterized HTTP access</h3>
Parameterized HTTP access processing can be created with an init generator name
and a init value String that specifies the parameter.
Suffixing the same generator name with hyphens, underscores, or digits
may create multiple processing instances,
which can then specify database field names that omit hyphens.
<table border="1" cellpadding="3" cellspacing="0">
<tr><th>Column&nbsp;generator init&nbsp;parameter</th><th>HTTP accessor</th>
 <th>SQL process</th></tr>
<tr><td>attributearraystring<br>attributearraystringclob<br>
attributestring<br>attributestringclob<br>
attributetext<br>attributetextclob</td>
 <td>request.getAttribute(String)</td>
 <td>ArrayString<br>ArrayStringClob<br>
 String<br>Clob<br>Text<br>TextClob</td></tr>
<tr><td>dateheader<br>dateheadertimestamp</td>
 <td>request.getDateHeader(String)</td><td>Long<br>Timestamp</td></tr>
<tr><td>header</td><td>request.getHeader(String)</td><td>String</td></tr>
<tr><td>headers<br>headersclob</td><td>request.getHeaders(String)</td>
 <td>ArrayString<br>ArrayStringClob</td></tr>
<tr><td>initparameter<br>initparametertext</td>
 <td>servletContext.getInitParameter(String)</td>
 <td>String<br>Text</td></tr>
<tr><td>intheader</td><td>request.getIntHeader(String)</td><td>Integer</td></tr>
<tr><td>literal<br>literalboolean<br>
 literalshort<br>literalinteger<br>literallong</td>
 <td><code>'String'</code><br>Boolean.valueOf(String) <i>extended</i><br>
 Short.valueOf(String)<br>Integer.valueOf(String)<br>Long.valueOf(String)</td>
 <td>String<br>Boolean<br>Short<br>Integer<br>Long</td></tr>
<tr><td>parameter<br>parametertext</td><td>request.getParameter(String)</td>
 <td>String<br>Text</td></tr>
<tr><td>parametervalues<br>parametervaluesclob</td>
 <td>request.getParameterValues(String)</td>
 <td>ArrayString<br>ArrayStringClob</td></tr>
<tr><td>responseheader</td><td>response.getHeader(String)</td>
 <td>String</td></tr>
<tr><td>responseheaders<br>responseheadersclob</td>
 <td>response.getHeaders(String) ||&nbsp;response.getHeaderValues(String)</td>
 <td>ArrayString<br>ArrayStringClob</td></tr>
<tr><td>servletattributestring</td>
 <td>servletContext.getAttribute(String)</td><td>String</td></tr>
<tr><td>sessionattributestring</td><td>session.getAttribute(String)</td>
 <td>String</td></tr>
<tr><td>userinrole</td><td>request.isUserInRole(String)</td>
 <td>Boolean</td></tr>
</table>
<h3>Detail init parameters</h3>
Format details of values sent to database field
may be specified with init parameters.
Except for throwableattribute,
these parameters should only appear at most once during initialization.<ul>
<li><b>arraybegindelimiter</b>:
Overrides the PostgreSQL compatible default ({)
start bracketing for literal arrays.
Other characters may be provided such as an openningsquare bracket ([),
which might be used for JSON field types.
Some databases may also have a leading keyword like "ARRAY".</li>
<li><b>arrayelementnull</b>: String to use in place of the default (null)
for null array values.
For instance,
an empty string without quote characters might specify
that nothing is to placed between commas in an array literal.</li>
<li><b>arrayenddelimiter</b>:
Overrides the PostgreSQL compatible default (})
end bracketing for literal arrays.
Other characters may be provided such as a closing square bracket (]),
which might be used for JSON field types.</li>
<li><b>debug</b>: A string that is not equivalent to false
turns on debugging output in various logs.</li>
<li><b>ellipsisstring</b>: A string to use with Text types
when the number of characters
exceeds the absolute value of an optional column size.
The default is a Unicode horizontal ellipsis
(&hellip;,&nbsp;&bsol;u2026) character.
A multi-character ellipsis, such as three (3) dots (...),
could replace the ellipsis character for a relational database
that cannot properly handle Unicode.</li>
<li><b>internalstringarray</b>: Use internal Array for Strings implementation
<code>SqlStringArray</code> of the <code>java.sql.Array</code> interface
for marshalling an Array for Strings for
<code>Connection.setArray(int, java.sql.Array)</code>
when the standard implementat of <code>java.sql.Array</code> would fail.
Some client implementations fail compatibility while escaping Strings
where the server does not properly handle all escape techniques,
particularly earlier version PostgreSQL servers.</li>
<li><b>lineseparator</b>: Override the default line separator property
of the local Java implementation for some externalized strings.
On Unix&trade; or Linix&trade; based systems, including the Mac,
the line separator is a single newline (\n) character.</li>
<li><b>stringelementsqltype</b>: SQL type String for String members
sent to the database for a Java array or Collection.
Even though databases like PostgreSQL support the standard type,
"character varying", for arrays,
their catalogs only accept more restricted types,
non-standard SQL types like "varchar" and "text"
for the type of String members.</li>
<li><b>tablename</b>: Provides a database table name, such as "access",
which may include a database schema name,
to receive the access log rows.
In some databases, the schema name must be a database user name.
The schema name may override the default schema in case of conflicts.</li>
<li><b>throwableattribute</b>: Adds <code>HttpServletRequest</code>
attribute names that may have a <code>Throwable</code> as their value.
Such an attribute needs to be set during error handling
since servers intercept <code>java.lang.Throwable</code>s
before they can reach <code>Filter</code>s and <code>Valve</code>s.
<p>
A Java Server Page (JSP) with the page directives,<pre>
     &lt;%@page language="java" isErrorPage="true" %&gt;
</pre>
sometimes mentioned in <code>WEB-INF/web.xml</code>
with tags <code>&lt;location&gt;</code>
and <code>&lt;exception-type&gt;</code>
with value <code>java.lang.Throwable</code>
in the <code>&lt;error-page&gt;</code> tag,
defines implicit variables <code>request</code> and <code>exception</code>,
which contains any <code>Throwable</code>,
which embedded Java code<pre>
     &lt;% request.setAttribute(<i><u>name</u></i>, exception); %&gt;
</pre>can make available for access logging.
Attribute names must match exactly, including case.
</li>
<li><b>uniqueviolationsqlstate</b>: Replaces the PostgreSQL compatible default,
5-character SQL state string for a database unique value collision, 23505,
with another string value.</li>
<li><b>uniqueviolationretries</b>: An integer representing the maximum
of retry attempts on encountering a unique value collision (unique_violation),
such as repeating the primary key values with another row.
If no columns are configured with a Key type,
then no retries are attempted since all of the same values would be resent.</li>
</ul>
<h3>Column name assignments</h3>
The "columns" init parameter name specifies the assignment of processing
to database fields.
The init parameter name columns may be repeated with
hyphen, underscore, or digit character suffixes.
These columns names are handled in lexical order.
The columns values are comma-separated database field assignments,
which may have white space surrounding tokens,
in order: <ul>
<li>the database name for the field
that may be enclosed in double quotes (&quot;)
to preserve the quoted name as-is and avoid conflicts with SQL keywords.</li>
<li>An optional signed size integral number, enclosed in parenthesis,
which truncates excessively large values from the beginning or the end
according to a negative or positive sign.
The first size overrides later sizes,
including any attached to processing that is being assigned.
The size does not include ellipsis characters,
which the Text type may add to the field stored in the database.</li>
<li>An optional equals sign (=) is required if the first field name
is to be assigned processing associated with another name.</li>
<li>An optional second name, which many be enclosed in double quotes (&quot;)
that would distguish the quoted name from names without quotes,
that already has processing assigned to it either
from a default processing name or
from a parameterized name created through an init parameter name.
</li>
<li>An optional second place to specify a field truncation size
in double quotes (&quot;).</li>
</ul>
<p>
Unquoted names that begin with a question mark (?)
do not create a database field but do allow the assignment of processing.
Question mark names act like variables to allow name swaps.
<p>
An example,
which one behavior of an earlier version of JDBCAccessLogValve inspired,
could use the "columns" value String:<br>
"timestamp"=timestampkey,
remotehost(15)=remoteaddr,
query(2048)=requesturi,
"method"(8),
status,
username(16)=remoteuser,
bytes=contentcountlengthinteger,
virtualhost(64)=servername,
serverport,
referer(1028)=referertext,
useragent(512)=useragenttext,
rootcausetrace
<p>
This example string would work with the following PostgreSQL DDL:<pre>
CREATE TABLE access (
  "timestamp" timestamp with time zone NOT NULL DEFAULT now(),
  remotehost character(15) NOT NULL,
  query text NOT NULL,
  "method" character varying(8) NOT NULL,
  status smallint NOT NULL DEFAULT -1,
  username character(16),
  bytes integer NOT NULL DEFAULT -1,
  virtualhost character varying(64) NOT NULL,
  serverport integer,
  referer text,
  useragent text,
  rootcausetrace text[],
  CONSTRAINT access_timestamp_pkey PRIMARY KEY ("timestamp"),
  CONSTRAINT access_query_index UNIQUE (query, "timestamp" ),
  CONSTRAINT access_remotehost_index UNIQUE (remotehost, "timestamp" ),
  CONSTRAINT access_useragent_index UNIQUE (useragent, "timestamp")
) WITH (OIDS=FALSE);
 </pre>
<h2>Development</h2>
 The filter was used with PostgreSQL 9.1 UTF8 on Mac OS X 10.6 (Snow Leopard)
 with JBoss 5.1GA and the Apple distribution of Oracle Java 1.6 originally.
 However, accommodations, such as CLOB columns and JSON array delimiters,
 are provided for other relational database management systems (RDMS)
 implementations:
 Yugabyte, Citus, MySQL, SQL Server, SyBase, DB2, Informix, Oracle RDBMS,
 Splice Machine, Derby, SAP and others (probably all trademarked names).
<p>
 JDBCAccessLogValve version 1.1,
 which Andre de Jesus and Peter Rossbach authored,
 inspired development but only their examples were extended.
<p>
<P>

<P>
<DL>
<DT><B>Author:</B></DT>
  <DD>Robert (Bob) L. Kirby
 <a href="http://bobkirby.info/">http://bobkirby.info/</a><br>
 kirby dot bob separated with an "at" sign from gmail dot com, avoiding spam.
<!-- Added option for processing Javadoc: -tag copyright --></DD>
<DT><B>Copyright:</B></DT>
  <DD>Copyright &copy; 2019 Robert L. Kirby. All rights reserved.
 <p>
 The use and distribution terms for this software are covered by the
 Eclipse Public License 1.0
 (<a href="http://opensource.org/licenses/eclipse-1.0.php"
  >http://opensource.org/licenses/eclipse-1.0.php</a>)
 which can be found in the file epl-v10.html.
 By using this software in any fashion, you are agreeing to be bound by
 the terms of this license.
 You must not remove this notice, or any other, from this software.
 <p>
 The intent of the use of this license is to keep this software
 as open source with the author identity intact,
 without contaminating other software with the license of this software,
 even if used internally or provided to others for commercial purposes.
 Software is provided as-is with user assumption of all risks.</DD>
</DL>
<HR>

<P>
<!-- ======== NESTED CLASS SUMMARY ======== -->

<A NAME="nested_class_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Nested Class Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected static&nbsp;class</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.DoArrayString.html" title="class in info.bobkirby.valve">JDBCAccessLogFilter.DoArrayString</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Abstract class converts request and response values into an array of
 String column values for insertion via JDBC into an access log.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected static&nbsp;class</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.DoArrayStringClob.html" title="class in info.bobkirby.valve">JDBCAccessLogFilter.DoArrayStringClob</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Abstract class converts request and response values into
 a CLOB column values representing a arrays of Strings
 for insertion via JDBC into an access log.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected static&nbsp;class</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.DoBoolean.html" title="class in info.bobkirby.valve">JDBCAccessLogFilter.DoBoolean</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Abstract class converts request and response values
 into Boolean column values for insertion via JDBC into an access log.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected static&nbsp;class</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.DoInteger.html" title="class in info.bobkirby.valve">JDBCAccessLogFilter.DoInteger</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Abstract class converts request and response values
 into Integer column values for insertion via JDBC into an access log.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected static&nbsp;class</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.DoLong.html" title="class in info.bobkirby.valve">JDBCAccessLogFilter.DoLong</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Abstract class converts request and response values
 into Long column values for insertion via JDBC into an access log.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected static&nbsp;class</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.DoShort.html" title="class in info.bobkirby.valve">JDBCAccessLogFilter.DoShort</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Abstract class converts request and response values
 into Short column values for insertion via JDBC into an access log.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected static&nbsp;class</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.DoString.html" title="class in info.bobkirby.valve">JDBCAccessLogFilter.DoString</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Abstract class converts request and response values into
 possibly truncated String column values
 for insertion via JDBC into an access log.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected static&nbsp;class</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.DoStringClob.html" title="class in info.bobkirby.valve">JDBCAccessLogFilter.DoStringClob</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Abstract class converts request and response values into
 possibly truncated CLOB column values
 for insertion via JDBC into an access log.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected static&nbsp;class</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.DoText.html" title="class in info.bobkirby.valve">JDBCAccessLogFilter.DoText</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Abstract class converts request and response values into,
 possibly truncated with an ellipsis String, String column values
 for insertion via JDBC into an access log.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected static&nbsp;class</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.DoTextClob.html" title="class in info.bobkirby.valve">JDBCAccessLogFilter.DoTextClob</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Abstract class converts request and response values into,
 possibly truncated with an ellipsis String, CLOB column values
 for insertion via JDBC into an access log.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected static&nbsp;class</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.DoTimestamp.html" title="class in info.bobkirby.valve">JDBCAccessLogFilter.DoTimestamp</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Abstract class converts request and response values
 into Timestamp column values for insertion via JDBC into an access log.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;class</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.DoValue.html" title="class in info.bobkirby.valve">JDBCAccessLogFilter.DoValue</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Abstract class converts request and response values
 into column values for insertion via JDBC into an access log.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;class</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.FilterResponse.html" title="class in info.bobkirby.valve">JDBCAccessLogFilter.FilterResponse</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Wrapper to allow getting values
 that are only supported in later environments
 or are not exposed by the standard interface.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected static&nbsp;class</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.NumericReturnType.html" title="enum in info.bobkirby.valve">JDBCAccessLogFilter.NumericReturnType</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected static&nbsp;interface</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.ParamSetup.html" title="interface in info.bobkirby.valve">JDBCAccessLogFilter.ParamSetup</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Action to setup an initialization that includes a parameter.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;interface</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.Warner.html" title="interface in info.bobkirby.valve">JDBCAccessLogFilter.Warner</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Use <code>org.apache.catalina.Valve</code> implementation
 to output warnings in a standard way when a ServletContext
 is unavailable, such as during Valve configuration,
 without having to use <code>java.lang.System.err</code>,
 which is the output technique of last resort.</TD>
</TR>
</TABLE>
&nbsp;<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.html#ARRAY_BEGIN_DEFAULT">ARRAY_BEGIN_DEFAULT</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Default beginning character for an array representation String
 to be sent to a SQL database, such as PostgreSQL: "{".</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.html#ARRAY_ELEMENT_NULL_DEFAULT">ARRAY_ELEMENT_NULL_DEFAULT</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Default unquoted String to insert for null members sent to the database
 in a String representation of a Java array or Collection: null.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.html#ARRAY_END_DEFAULT">ARRAY_END_DEFAULT</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Default ending character for an array representation String
 to be sent to a SQL database, such as PostgreSQL: "}".</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.html#ELLIPSIS_STRING_DEFAULT">ELLIPSIS_STRING_DEFAULT</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Default string to use when truncating the Text type
 to fit within size limitations: an ellipsis character "&hellip;".</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.html#STRING_ELEMENT_SQL_TYPE_DEFAULT">STRING_ELEMENT_SQL_TYPE_DEFAULT</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Default unquoted SQL type String for String members
 sent to the database for a Java array or Collection: "text".</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.html#UNICODE_CHARACTER_CLASS">UNICODE_CHARACTER_CLASS</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Flags to OR with any other <code>java.util.regex.Pattern</code>
 flags during Pattern compilation to allow the \w (word)
 regular expression part to match all Unicode word characters.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.lang.Byte</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.html#UNIQUE_VIOLATION_RETRIES_DEFAULT">UNIQUE_VIOLATION_RETRIES_DEFAULT</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Default count of retries with adjusted key values after detecting
 unique key violations such as for primary keys: 3.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.html#UNIQUE_VIOLATION_SQLSTATE_DEFAULT">UNIQUE_VIOLATION_SQLSTATE_DEFAULT</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Default 5-character SQL state code that SQL implementation may return
 when detecting unique key violations such as for primary keys: 23505.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.html#JDBCAccessLogFilter()">JDBCAccessLogFilter</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Default Filter constructor for stand-alone Filter using reflection
 and not accepting comma separated values except for column assignments
 and throwableattribute names.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.html#JDBCAccessLogFilter(boolean, boolean)">JDBCAccessLogFilter</A></B>(boolean&nbsp;allowCSVs,
                    boolean&nbsp;needMethods)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Constructor for Valves and overriding Filters.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.FilterResponse.html" title="class in info.bobkirby.valve">JDBCAccessLogFilter.FilterResponse</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.html#createFilterResponse(javax.servlet.http.HttpServletResponse)">createFilterResponse</A></B>(javax.servlet.http.HttpServletResponse&nbsp;httpResponse)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Create new FilterResponse in a way that may be overridden.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.html#debug(java.lang.CharSequence)">debug</A></B>(java.lang.CharSequence&nbsp;message)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Outputs a debug level message using one of the standard techniques,
 if available.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.html#destroy()">destroy</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Release cached <code>PreparedStatement</code>s and
 JDBC connections that are not from a <code>DataSource</code>.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.html#doFilter(javax.servlet.ServletRequest, javax.servlet.ServletResponse, javax.servlet.FilterChain)">doFilter</A></B>(javax.servlet.ServletRequest&nbsp;request,
         javax.servlet.ServletResponse&nbsp;servletResponse,
         javax.servlet.FilterChain&nbsp;chain)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.html#getInfo()">getInfo</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return descriptive information about this Filter implementation.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected static&nbsp;<A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.NumericReturnType.html" title="enum in info.bobkirby.valve">JDBCAccessLogFilter.NumericReturnType</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.html#getReturnType(java.lang.reflect.Method)">getReturnType</A></B>(java.lang.reflect.Method&nbsp;method)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.Warner.html" title="interface in info.bobkirby.valve">JDBCAccessLogFilter.Warner</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.html#getWarner()">getWarner</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return the current implementation of the Warner interface,
 which defaults to null.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.html#init(javax.servlet.FilterConfig)">init</A></B>(javax.servlet.FilterConfig&nbsp;filterConfig)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.html#isDebugEnabled()">isDebugEnabled</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;True if debugging is enabled.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.html#isStackPrinted()">isStackPrinted</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns true if the Java stack has been printed
 after a processing warning to avoid obscuring the event log.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.html#log(java.lang.CharSequence)">log</A></B>(java.lang.CharSequence&nbsp;message)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Outputs a warning level message using one of the standard techniques,
 if available.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.html#log(java.lang.CharSequence, java.lang.Throwable)">log</A></B>(java.lang.CharSequence&nbsp;message,
    java.lang.Throwable&nbsp;throwable)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Outputs a warning level message using one of the standard techniques,
 if available, and outputs a stack trace.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.StringBuilder</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.html#logStringBuilder(java.lang.CharSequence, java.lang.String)">logStringBuilder</A></B>(java.lang.CharSequence&nbsp;message,
                 java.lang.String&nbsp;routine)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Helper function to create log messages.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.html#process(javax.servlet.http.HttpServletRequest, info.bobkirby.valve.JDBCAccessLogFilter.FilterResponse)">process</A></B>(javax.servlet.http.HttpServletRequest&nbsp;request,
        <A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.FilterResponse.html" title="class in info.bobkirby.valve">JDBCAccessLogFilter.FilterResponse</A>&nbsp;response)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Does the access logging for <code>Filter.doFilter</code>
 or <code>Valve.invoke</code> in four (4) phases.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.html#putColumnDoValues(java.lang.String, info.bobkirby.valve.JDBCAccessLogFilter.DoValue)">putColumnDoValues</A></B>(java.lang.String&nbsp;name,
                  <A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.DoValue.html" title="class in info.bobkirby.valve">JDBCAccessLogFilter.DoValue</A>&nbsp;doValue)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Put a <code>DoValue</code> action for a column <code>name</code>
 on the <code>columnDoValues</code> map.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.html#putNoCSVs(java.lang.String, info.bobkirby.valve.JDBCAccessLogFilter.ParamSetup)">putNoCSVs</A></B>(java.lang.String&nbsp;name,
          <A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.ParamSetup.html" title="interface in info.bobkirby.valve">JDBCAccessLogFilter.ParamSetup</A>&nbsp;paramSetup)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Put a <code>ParamSetup</code> for an action <code>name</code>
 on the <code>parameterSetups</code> map
 and unconditionally disallow comma separated values (CSVs) for the name.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.html#putNofilterCSVs(java.lang.String, info.bobkirby.valve.JDBCAccessLogFilter.ParamSetup)">putNofilterCSVs</A></B>(java.lang.String&nbsp;name,
                <A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.ParamSetup.html" title="interface in info.bobkirby.valve">JDBCAccessLogFilter.ParamSetup</A>&nbsp;paramSetup)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Put a <code>ParamSetup</code> for an action <code>name</code>
 on the <code>parameterSetups</code> map
 and conditionally allow comma separated values (CSVs) for the name
 if the <code>allowCSVs</code> constructor parameter was true,
 which may be the case for Valves but not for pure Filters.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.html#putNoIndexing(java.lang.String, info.bobkirby.valve.JDBCAccessLogFilter.ParamSetup)">putNoIndexing</A></B>(java.lang.String&nbsp;name,
              <A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.ParamSetup.html" title="interface in info.bobkirby.valve">JDBCAccessLogFilter.ParamSetup</A>&nbsp;paramSetup)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Put a <code>ParamSetup</code> for an action <code>name</code>
 on the <code>parameterSetups</code> map.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.html#searchForMethods()">searchForMethods</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If a child class to not get an appropriate HttpServletResponse subclass,
 try searching once for Methods with reflection.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.html#setDebugEnabled(boolean)">setDebugEnabled</A></B>(boolean&nbsp;debugEnabled)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sets debugging status to avoid unnecessary formatting.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.html#setStackPrinted(boolean)">setStackPrinted</A></B>(boolean&nbsp;stackPrinted)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sets the printed status of the Java stack after a processing warning.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.html#setWarner(info.bobkirby.valve.JDBCAccessLogFilter.Warner)">setWarner</A></B>(<A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.Warner.html" title="interface in info.bobkirby.valve">JDBCAccessLogFilter.Warner</A>&nbsp;warner)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sets the current implementation of the Warner interface,
 which defaults to null,
 but <code>org.apache.catalina.Valve</code> implementations
 may establish.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.html#sqlName(java.lang.String, java.lang.String)">sqlName</A></B>(java.lang.String&nbsp;name,
        java.lang.String&nbsp;description)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return a SQL acceptable column (field) name string from provided name.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Field Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="ELLIPSIS_STRING_DEFAULT"><!-- --></A><H3>
ELLIPSIS_STRING_DEFAULT</H3>
<PRE>
public static final java.lang.String <B>ELLIPSIS_STRING_DEFAULT</B></PRE>
<DL>
<DD>Default string to use when truncating the Text type
 to fit within size limitations: an ellipsis character "&hellip;".
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../constant-values.html#info.bobkirby.valve.JDBCAccessLogFilter.ELLIPSIS_STRING_DEFAULT">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="UNIQUE_VIOLATION_SQLSTATE_DEFAULT"><!-- --></A><H3>
UNIQUE_VIOLATION_SQLSTATE_DEFAULT</H3>
<PRE>
public static final java.lang.String <B>UNIQUE_VIOLATION_SQLSTATE_DEFAULT</B></PRE>
<DL>
<DD>Default 5-character SQL state code that SQL implementation may return
 when detecting unique key violations such as for primary keys: 23505.
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../constant-values.html#info.bobkirby.valve.JDBCAccessLogFilter.UNIQUE_VIOLATION_SQLSTATE_DEFAULT">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="UNIQUE_VIOLATION_RETRIES_DEFAULT"><!-- --></A><H3>
UNIQUE_VIOLATION_RETRIES_DEFAULT</H3>
<PRE>
public static final java.lang.Byte <B>UNIQUE_VIOLATION_RETRIES_DEFAULT</B></PRE>
<DL>
<DD>Default count of retries with adjusted key values after detecting
 unique key violations such as for primary keys: 3.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="ARRAY_BEGIN_DEFAULT"><!-- --></A><H3>
ARRAY_BEGIN_DEFAULT</H3>
<PRE>
public static final java.lang.String <B>ARRAY_BEGIN_DEFAULT</B></PRE>
<DL>
<DD>Default beginning character for an array representation String
 to be sent to a SQL database, such as PostgreSQL: "{".
 JSON arrays are delimited with square brackets ([]) in some databases.
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../constant-values.html#info.bobkirby.valve.JDBCAccessLogFilter.ARRAY_BEGIN_DEFAULT">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="ARRAY_END_DEFAULT"><!-- --></A><H3>
ARRAY_END_DEFAULT</H3>
<PRE>
public static final java.lang.String <B>ARRAY_END_DEFAULT</B></PRE>
<DL>
<DD>Default ending character for an array representation String
 to be sent to a SQL database, such as PostgreSQL: "}".
 JSON arrays are delimited with square brackets ([]) in some databases.
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../constant-values.html#info.bobkirby.valve.JDBCAccessLogFilter.ARRAY_END_DEFAULT">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="ARRAY_ELEMENT_NULL_DEFAULT"><!-- --></A><H3>
ARRAY_ELEMENT_NULL_DEFAULT</H3>
<PRE>
public static final java.lang.String <B>ARRAY_ELEMENT_NULL_DEFAULT</B></PRE>
<DL>
<DD>Default unquoted String to insert for null members sent to the database
 in a String representation of a Java array or Collection: null.
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../constant-values.html#info.bobkirby.valve.JDBCAccessLogFilter.ARRAY_ELEMENT_NULL_DEFAULT">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="STRING_ELEMENT_SQL_TYPE_DEFAULT"><!-- --></A><H3>
STRING_ELEMENT_SQL_TYPE_DEFAULT</H3>
<PRE>
public static final java.lang.String <B>STRING_ELEMENT_SQL_TYPE_DEFAULT</B></PRE>
<DL>
<DD>Default unquoted SQL type String for String members
 sent to the database for a Java array or Collection: "text".
 Even though databases like PostgreSQL support the standard type,
 "character varying", their catalogs only accept more restricted types,
 non-standard SQL types like "varchar" and "text"
 for the type of String members.
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../constant-values.html#info.bobkirby.valve.JDBCAccessLogFilter.STRING_ELEMENT_SQL_TYPE_DEFAULT">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="UNICODE_CHARACTER_CLASS"><!-- --></A><H3>
UNICODE_CHARACTER_CLASS</H3>
<PRE>
public static int <B>UNICODE_CHARACTER_CLASS</B></PRE>
<DL>
<DD>Flags to OR with any other <code>java.util.regex.Pattern</code>
 flags during Pattern compilation to allow the \w (word)
 regular expression part to match all Unicode word characters.
 Before Java version 7 this flag was not implemented,
 and will be zero (0), giving \w only the older word character set,
 which may, in turn, limit database field names
 to the older word character set,
<P>
<DL>
</DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="JDBCAccessLogFilter()"><!-- --></A><H3>
JDBCAccessLogFilter</H3>
<PRE>
public <B>JDBCAccessLogFilter</B>()</PRE>
<DL>
<DD>Default Filter constructor for stand-alone Filter using reflection
 and not accepting comma separated values except for column assignments
 and throwableattribute names.
<P>
</DL>
<HR>

<A NAME="JDBCAccessLogFilter(boolean, boolean)"><!-- --></A><H3>
JDBCAccessLogFilter</H3>
<PRE>
public <B>JDBCAccessLogFilter</B>(boolean&nbsp;allowCSVs,
                           boolean&nbsp;needMethods)</PRE>
<DL>
<DD>Constructor for Valves and overriding Filters.
<P>
<DL>
<DT><B>Parameters:</B><DD><CODE>allowCSVs</CODE> - Flag for handling init-param values,
 which might accept more than one instance,
 to parse comma-separated values, which may also have whitespace.<DD><CODE>needMethods</CODE> - Flag to have the first FilterResponse instance
 use reflection to find unadvertised Methods.</DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="getInfo()"><!-- --></A><H3>
getInfo</H3>
<PRE>
public java.lang.String <B>getInfo</B>()</PRE>
<DL>
<DD>Return descriptive information about this Filter implementation.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getReturnType(java.lang.reflect.Method)"><!-- --></A><H3>
getReturnType</H3>
<PRE>
protected static <A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.NumericReturnType.html" title="enum in info.bobkirby.valve">JDBCAccessLogFilter.NumericReturnType</A> <B>getReturnType</B>(java.lang.reflect.Method&nbsp;method)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="searchForMethods()"><!-- --></A><H3>
searchForMethods</H3>
<PRE>
public boolean <B>searchForMethods</B>()</PRE>
<DL>
<DD>If a child class to not get an appropriate HttpServletResponse subclass,
 try searching once for Methods with reflection.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="createFilterResponse(javax.servlet.http.HttpServletResponse)"><!-- --></A><H3>
createFilterResponse</H3>
<PRE>
public <A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.FilterResponse.html" title="class in info.bobkirby.valve">JDBCAccessLogFilter.FilterResponse</A> <B>createFilterResponse</B>(javax.servlet.http.HttpServletResponse&nbsp;httpResponse)</PRE>
<DL>
<DD>Create new FilterResponse in a way that may be overridden.
 The static needMethods should be true if reflection is expected.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>httpResponse</CODE> - The HttpServletResponse that will be wrapped.</DL>
</DD>
</DL>
<HR>

<A NAME="getWarner()"><!-- --></A><H3>
getWarner</H3>
<PRE>
public <A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.Warner.html" title="interface in info.bobkirby.valve">JDBCAccessLogFilter.Warner</A> <B>getWarner</B>()</PRE>
<DL>
<DD>Return the current implementation of the Warner interface,
 which defaults to null.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="setWarner(info.bobkirby.valve.JDBCAccessLogFilter.Warner)"><!-- --></A><H3>
setWarner</H3>
<PRE>
public void <B>setWarner</B>(<A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.Warner.html" title="interface in info.bobkirby.valve">JDBCAccessLogFilter.Warner</A>&nbsp;warner)</PRE>
<DL>
<DD>Sets the current implementation of the Warner interface,
 which defaults to null,
 but <code>org.apache.catalina.Valve</code> implementations
 may establish.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="logStringBuilder(java.lang.CharSequence, java.lang.String)"><!-- --></A><H3>
logStringBuilder</H3>
<PRE>
public java.lang.StringBuilder <B>logStringBuilder</B>(java.lang.CharSequence&nbsp;message,
                                                java.lang.String&nbsp;routine)</PRE>
<DL>
<DD>Helper function to create log messages.
 Declare public to give Valves access to a common format.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>message</CODE> - Message, which may be null,
 which follow an identification header.<DD><CODE>routine</CODE> - Name of the routine called that wants the StringBuilder.</DL>
</DD>
</DL>
<HR>

<A NAME="log(java.lang.CharSequence)"><!-- --></A><H3>
log</H3>
<PRE>
public void <B>log</B>(java.lang.CharSequence&nbsp;message)</PRE>
<DL>
<DD>Outputs a warning level message using one of the standard techniques,
 if available.
 If not, defaults to <code>java.lang.System.err.println()</code>,
 which is the output technique of last resort
 since it does not support typical event logging.
 Warnings allow processing to continue as opposed to
 throwing an Exception, which stops processing.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>message</CODE> - A CharSequence, which may not be null or empty, and
 which provides warning-level message about a continuable situation.
<DT><B>Throws:</B>
<DD><CODE>java.lang.NullPointerException</CODE> - If the message parameter is null.
<DD><CODE>java.lang.IllegalArgumentException</CODE> - If the message parameter is empty.</DL>
</DD>
</DL>
<HR>

<A NAME="log(java.lang.CharSequence, java.lang.Throwable)"><!-- --></A><H3>
log</H3>
<PRE>
public void <B>log</B>(java.lang.CharSequence&nbsp;message,
                java.lang.Throwable&nbsp;throwable)</PRE>
<DL>
<DD>Outputs a warning level message using one of the standard techniques,
 if available, and outputs a stack trace.
 If not, defaults to <code>java.lang.System.err.println()</Code>,
 which is the output technique of last resort
 since it does not support typical event logging.
 Warnings allow processing to continue as opposed to
 throwing an Exception, which stops processing.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>message</CODE> - A CharSequence, which might be null or empty,
 to introduce the warning message.<DD><CODE>throwable</CODE> - Any Throwable, which will have its stack trace dumped,
 providing more information about a continuable situation.
<DT><B>Throws:</B>
<DD><CODE>java.lang.NullPointerException</CODE> - If the throwable parameter is null.</DL>
</DD>
</DL>
<HR>

<A NAME="debug(java.lang.CharSequence)"><!-- --></A><H3>
debug</H3>
<PRE>
public void <B>debug</B>(java.lang.CharSequence&nbsp;message)</PRE>
<DL>
<DD>Outputs a debug level message using one of the standard techniques,
 if available.
 If not, defaults to <code>java.lang.System.out.println()</code>,
 which is the output technique of last resort.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>message</CODE> - A CharSequence, which may not be null or empty, and
 which provides warning-level message about a continuable situation.
<DT><B>Throws:</B>
<DD><CODE>java.lang.NullPointerException</CODE> - If the message parameter is null.
<DD><CODE>java.lang.IllegalArgumentException</CODE> - If the message parameter is empty.</DL>
</DD>
</DL>
<HR>

<A NAME="isDebugEnabled()"><!-- --></A><H3>
isDebugEnabled</H3>
<PRE>
public boolean <B>isDebugEnabled</B>()</PRE>
<DL>
<DD>True if debugging is enabled.
 Used in conditionals that wrap debugging statements
 to avoid unnecessary formatting.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="setDebugEnabled(boolean)"><!-- --></A><H3>
setDebugEnabled</H3>
<PRE>
public void <B>setDebugEnabled</B>(boolean&nbsp;debugEnabled)</PRE>
<DL>
<DD>Sets debugging status to avoid unnecessary formatting.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>debugEnabled</CODE> - Set to true if debugging enabled.</DL>
</DD>
</DL>
<HR>

<A NAME="isStackPrinted()"><!-- --></A><H3>
isStackPrinted</H3>
<PRE>
public boolean <B>isStackPrinted</B>()</PRE>
<DL>
<DD>Returns true if the Java stack has been printed
 after a processing warning to avoid obscuring the event log.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="setStackPrinted(boolean)"><!-- --></A><H3>
setStackPrinted</H3>
<PRE>
public void <B>setStackPrinted</B>(boolean&nbsp;stackPrinted)</PRE>
<DL>
<DD>Sets the printed status of the Java stack after a processing warning.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="sqlName(java.lang.String, java.lang.String)"><!-- --></A><H3>
sqlName</H3>
<PRE>
protected java.lang.String <B>sqlName</B>(java.lang.String&nbsp;name,
                                   java.lang.String&nbsp;description)
                            throws javax.servlet.ServletException</PRE>
<DL>
<DD>Return a SQL acceptable column (field) name string from provided name.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>name</CODE> - A name String to be converted into a SQL column name.<DD><CODE>description</CODE> - A description of the String,
 which will be included in any ServletException.
<DT><B>Throws:</B>
<DD><CODE>javax.servlet.ServletException</CODE> - When the name string <code>name</code>
 does not match SQL column (field) name syntax.</DL>
</DD>
</DL>
<HR>

<A NAME="putColumnDoValues(java.lang.String, info.bobkirby.valve.JDBCAccessLogFilter.DoValue)"><!-- --></A><H3>
putColumnDoValues</H3>
<PRE>
public void <B>putColumnDoValues</B>(java.lang.String&nbsp;name,
                              <A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.DoValue.html" title="class in info.bobkirby.valve">JDBCAccessLogFilter.DoValue</A>&nbsp;doValue)</PRE>
<DL>
<DD>Put a <code>DoValue</code> action for a column <code>name</code>
 on the <code>columnDoValues</code> map.
 The method is public to allow Filter and, maybe, Valve extensions,
 which must be installed before initializing database columns.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>name</CODE> - A lowercase string naming a column action.<DD><CODE>doValue</CODE> - A DoValue instance that will do actions for a column,
 which does not require further parameter handling.
<DT><B>Throws:</B>
<DD><CODE>java.lang.NullPointerException</CODE> - if either parameter is null.
<DD><CODE>java.lang.IllegalArgumentException</CODE> - if name is empty except for whitespace.</DL>
</DD>
</DL>
<HR>

<A NAME="putNoCSVs(java.lang.String, info.bobkirby.valve.JDBCAccessLogFilter.ParamSetup)"><!-- --></A><H3>
putNoCSVs</H3>
<PRE>
public void <B>putNoCSVs</B>(java.lang.String&nbsp;name,
                      <A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.ParamSetup.html" title="interface in info.bobkirby.valve">JDBCAccessLogFilter.ParamSetup</A>&nbsp;paramSetup)</PRE>
<DL>
<DD>Put a <code>ParamSetup</code> for an action <code>name</code>
 on the <code>parameterSetups</code> map
 and unconditionally disallow comma separated values (CSVs) for the name.
 Such <code>name</code>s should be initialized at most once.
 The method is public to allow Filter and Valve extensions,
 which must be installed before initialization,
 typically during construction.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>name</CODE> - A lowercase string naming a setup action.<DD><CODE>paramSetup</CODE> - A ParamSetup instance that will do actions
 when the parameter is initialized.
<DT><B>Throws:</B>
<DD><CODE>java.lang.NullPointerException</CODE> - if either parameter is null.
<DD><CODE>java.lang.IllegalArgumentException</CODE> - if name is empty except for whitespace.</DL>
</DD>
</DL>
<HR>

<A NAME="putNofilterCSVs(java.lang.String, info.bobkirby.valve.JDBCAccessLogFilter.ParamSetup)"><!-- --></A><H3>
putNofilterCSVs</H3>
<PRE>
public void <B>putNofilterCSVs</B>(java.lang.String&nbsp;name,
                            <A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.ParamSetup.html" title="interface in info.bobkirby.valve">JDBCAccessLogFilter.ParamSetup</A>&nbsp;paramSetup)</PRE>
<DL>
<DD>Put a <code>ParamSetup</code> for an action <code>name</code>
 on the <code>parameterSetups</code> map
 and conditionally allow comma separated values (CSVs) for the name
 if the <code>allowCSVs</code> constructor parameter was true,
 which may be the case for Valves but not for pure Filters.
 Such <code>name</code>s should be initialized at most once.
 The method is public to allow Filter and Valve extensions,
 which must be installed before initialization,
 typically during construction.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>name</CODE> - A lowercase string naming a setup action.<DD><CODE>paramSetup</CODE> - A ParamSetup instance that will do actions
 when the parameter is initialized.
<DT><B>Throws:</B>
<DD><CODE>java.lang.NullPointerException</CODE> - if either parameter is null.
<DD><CODE>java.lang.IllegalArgumentException</CODE> - if name is empty except for whitespace.</DL>
</DD>
</DL>
<HR>

<A NAME="putNoIndexing(java.lang.String, info.bobkirby.valve.JDBCAccessLogFilter.ParamSetup)"><!-- --></A><H3>
putNoIndexing</H3>
<PRE>
public void <B>putNoIndexing</B>(java.lang.String&nbsp;name,
                          <A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.ParamSetup.html" title="interface in info.bobkirby.valve">JDBCAccessLogFilter.ParamSetup</A>&nbsp;paramSetup)</PRE>
<DL>
<DD>Put a <code>ParamSetup</code> for an action <code>name</code>
 on the <code>parameterSetups</code> map.
 Do not add an index suffix to names that appear more than once.
 Such names, like "columns", are combined into a single list
 of comma separated values (CSVs).
 The method is public to allow Filter and Valve extensions,
 which must be installed before initialization,
 typically during construction.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>name</CODE> - A lowercase string naming a setup action.<DD><CODE>paramSetup</CODE> - A ParamSetup instance that will do actions
 when the parameter is initialized.
<DT><B>Throws:</B>
<DD><CODE>java.lang.NullPointerException</CODE> - if either parameter is null.
<DD><CODE>java.lang.IllegalArgumentException</CODE> - if name is empty except for whitespace.</DL>
</DD>
</DL>
<HR>

<A NAME="init(javax.servlet.FilterConfig)"><!-- --></A><H3>
init</H3>
<PRE>
public void <B>init</B>(javax.servlet.FilterConfig&nbsp;filterConfig)
          throws javax.servlet.ServletException</PRE>
<DL>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE>init</CODE> in interface <CODE>javax.servlet.Filter</CODE></DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE>javax.servlet.ServletException</CODE><DT><B>See Also:</B><DD><CODE>Filter.init(FilterConfig)</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="destroy()"><!-- --></A><H3>
destroy</H3>
<PRE>
public void <B>destroy</B>()</PRE>
<DL>
<DD>Release cached <code>PreparedStatement</code>s and
 JDBC connections that are not from a <code>DataSource</code>.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE>destroy</CODE> in interface <CODE>javax.servlet.Filter</CODE></DL>
</DD>
<DD><DL>
<DT><B>See Also:</B><DD><CODE>Filter.destroy()</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="process(javax.servlet.http.HttpServletRequest, info.bobkirby.valve.JDBCAccessLogFilter.FilterResponse)"><!-- --></A><H3>
process</H3>
<PRE>
public void <B>process</B>(javax.servlet.http.HttpServletRequest&nbsp;request,
                    <A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.FilterResponse.html" title="class in info.bobkirby.valve">JDBCAccessLogFilter.FilterResponse</A>&nbsp;response)
             throws java.io.IOException,
                    java.sql.SQLException,
                    javax.servlet.ServletException</PRE>
<DL>
<DD>Does the access logging for <code>Filter.doFilter</code>
 or <code>Valve.invoke</code> in four (4) phases.
 <ul>
 <ol>Creates an array of potential Objects to pass new values
 for the database fields.</ol>
 <ol>Determines which of those values are non-null
 in order to set up a <code>java.sql.PreparedStatement</code>,
 which passes non-null values and
 uses database defaults for null ones.</ol>
 <ol>Fills in the <code>java.sql.PreparedStatement</code>
 with appropriate setters.</ol>
 </ol>Executes the <code>java.sql.PreparedStatement</code>
 to pass values to the database.</ol></ul>
 <p>
 Synchronizes on all of the <code>java.sql.Connection</code> objects
 even though Datasource pools would provide enough synchronization.
 Guards against a DataSource using a basic implementation that might issue
 a <code>java.sql.Connection</code> twice.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>request</CODE> - The HttpServletRequest passed with the HTTP query.<DD><CODE>response</CODE> - A FilterResponse wrapping the HTTP query response.
<DT><B>Throws:</B>
<DD><CODE>java.sql.SQLException</CODE> - rarely when the PreparedStatement
 cannot properly interact with the database during setup.
<DD><CODE>javax.servlet.ServletException</CODE> - when the data cannot be obtained
 because of an unexpected situation, typically a programming error.
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="doFilter(javax.servlet.ServletRequest, javax.servlet.ServletResponse, javax.servlet.FilterChain)"><!-- --></A><H3>
doFilter</H3>
<PRE>
public void <B>doFilter</B>(javax.servlet.ServletRequest&nbsp;request,
                     javax.servlet.ServletResponse&nbsp;servletResponse,
                     javax.servlet.FilterChain&nbsp;chain)
              throws java.io.IOException,
                     javax.servlet.ServletException</PRE>
<DL>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE>doFilter</CODE> in interface <CODE>javax.servlet.Filter</CODE></DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE> - Could be thrown by next stacked Filter.
<DD><CODE>javax.servlet.ServletException</CODE> - Database SQLException is wrapped 
 in a ServletException. Could be thrown by next stacked Filter too.
<DD><CODE>java.lang.NullPointerException</CODE> - If any parameter is null.<DT><B>See Also:</B><DD><CODE>Filter.doFilter(ServletRequest, ServletResponse, FilterChain)</CODE></DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../info/bobkirby/valve/package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../info/bobkirby/valve/FacadeJDBCAccessLogFilter.FacadeFilterResponse.html" title="class in info.bobkirby.valve"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../info/bobkirby/valve/JDBCAccessLogFilter.DoArrayString.html" title="class in info.bobkirby.valve"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?info/bobkirby/valve/JDBCAccessLogFilter.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="JDBCAccessLogFilter.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;<A HREF="#nested_class_summary">NESTED</A>&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
